{
    "Calculator": {
        "name":"Calculator",
        "description":"Do calculations, beautifully. The built-in calculator for WebSystem.",
        "tags":"calc,number,calculations,calculator",
        "script":"(function(){GlobalStyle.newClass(\"calc-screen-container\",\"background-color: #8c8c8c;\",\"width:100%;\",\"height: 30%;\"),GlobalStyle.newClass(\"calc-screen\",\"position: absolute;\",\"top: 10%;\",\"width: 99%;\",\"font-size: 4em;\",\"text-align: right;\"),GlobalStyle.newClass(\"calc-button\",\"display: table-cell;\",\"background-color: rgba(180,180,180,0.3);\",\"border: 0.2em solid black;\",\"text-align: center;\",\"vertical-align: middle;\",\"transition: background-color 0.03s;\",\"font-size: 1.3em;\"),GlobalStyle.newClass(\"calc-button:active\",\"background-color: rgba(255, 255, 255, 0.4);\"),GlobalStyle.newClass(\"calc-button-container\",\"display:table;\",\"width:100%;\",\"height:calc(100% - 30%);\"),GlobalStyle.newClass(\"calc-button-row\",\"display: table-row;\",\"height:20%;\"),GlobalStyle.newClass(\"calc-modifier\",\"background-color: rgba(255, 159, 12, 0.8);\"),GlobalStyle.newClass(\"calc-modifier:active\",\"background-color: rgba(255, 159, 12, 1);\"),GlobalStyle.newClass(\"calc-0\",\"border-right:none;\"),GlobalStyle.newClass(\"calc-0-2\",\"border-left:none;\",\"color: rgba(0,0,0,0);\");class Calculator{constructor(){this.operation=\"\",this.lastNumber=\"\",this.currentNumber=\"\",this.oldFontSize=\"\";let e=new Window(195,352,\"Calculator\",20,35,{x:20,y:2.2,topBarCreator:this.createTopBar,thisContext:this,pathToApp:\"/Users/\"+NAME+\"/Applications/Calculator.app/\",maximizeDisabled:!0});this.window=e.getWindow(),this.header=e.getHeader(),this.win=e,this.win.setBackgroundColor(\"rgb(40,40,40)\"),this.window.style.color=\"white\";let t=document.createElement(\"div\");t.style.height=\"calc(100% - 1.2em)\",this.window.appendChild(t);let a=document.createElement(\"div\");a.classList.add(\"calc-screen-container\");let l=document.createElement(\"div\");a.appendChild(l),l.innerHTML=\"0\",l.classList.add(\"calc-screen\"),this.fitText(l),t.appendChild(a);let r=document.createElement(\"div\");r.classList.add(\"calc-button-container\"),t.appendChild(r);let n=document.createElement(\"div\");n.classList.add(\"calc-button-row\"),r.appendChild(n);let i=document.createElement(\"div\");i.classList.add(\"calc-button-row\"),r.appendChild(i);let c=document.createElement(\"div\");c.classList.add(\"calc-button-row\"),r.appendChild(c);let s=document.createElement(\"div\");s.classList.add(\"calc-button-row\"),r.appendChild(s);let o=document.createElement(\"div\");o.classList.add(\"calc-button-row\"),r.appendChild(o);let d=document.createElement(\"div\");d.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),d.innerHTML=\"AC\",d.title=\"All Clear (or press c)\",n.appendChild(d);let u=document.createElement(\"div\");u.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),u.innerHTML=\"+/-\",u.title=\"Negate the sign of the current value (or press shift-minus)\",n.appendChild(u);let b=document.createElement(\"div\");b.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),b.innerHTML=\"%\",b.title=\"Percent (or press %)\",n.appendChild(b);let h=document.createElement(\"div\");h.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),h.innerHTML=\"/\",h.title=\"Divide (or press /)\",n.appendChild(h);let p=document.createElement(\"div\");p.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),p.innerHTML=\"7\",i.appendChild(p);let m=document.createElement(\"div\");m.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),m.innerHTML=\"8\",i.appendChild(m);let w=document.createElement(\"div\");w.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),w.innerHTML=\"9\",i.appendChild(w);let C=document.createElement(\"div\");C.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),C.innerHTML=\"x\",C.title=\"Multiply (or press x or *)\",i.appendChild(C);let L=document.createElement(\"div\");L.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),L.innerHTML=\"4\",c.appendChild(L);let T=document.createElement(\"div\");T.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),T.innerHTML=\"5\",c.appendChild(T);let g=document.createElement(\"div\");g.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),g.innerHTML=\"6\",c.appendChild(g);let v=document.createElement(\"div\");v.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),v.innerHTML=\"-\",v.title=\"Subtract (or press -)\",c.appendChild(v);let N=document.createElement(\"div\");N.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),N.innerHTML=\"1\",s.appendChild(N);let k=document.createElement(\"div\");k.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),k.innerHTML=\"2\",s.appendChild(k);let S=document.createElement(\"div\");S.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),S.innerHTML=\"3\",s.appendChild(S);let y=document.createElement(\"div\");y.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),y.innerHTML=\"+\",y.title=\"Add (or press +)\",s.appendChild(y);let f=document.createElement(\"div\");f.classList.add(\"calc-button\",\"calc-0\",\"unselectable\",\"clickable\"),f.innerHTML=\"0\",o.appendChild(f);let E=document.createElement(\"div\");E.classList.add(\"calc-button\",\"calc-0-2\",\"unselectable\",\"clickable\"),E.innerHTML=\"0\",o.appendChild(E);let M=document.createElement(\"div\");M.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),M.innerHTML=\".\",M.title=\"Add a decimal point (or press .)\",o.appendChild(M);let H=document.createElement(\"div\");H.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),H.innerHTML=\"=\",H.title=\"Equal (or press enter or =)\",o.appendChild(H),this.window.querySelectorAll(\".calc-button\").forEach(e=>{e.onclick=(()=>{this.pressButton(e.innerHTML)})}),this.screen=l;const x=e=>{if(void 0===this.win&&document.removeEventListener(\"keydown\",x),void 0!==this.win&&this.win.focused()){let t=e.key;this.pressButton(t),\"c\"==t||\"C\"==t?e.ctrlKey||e.metaKey?(e.preventDefault(),navigator.clipboard.writeText(this.currentNumber)):this.pressButton(\"AC\"):\"Enter\"==t?this.pressButton(\"=\"):\"_\"==t?this.pressButton(\"+/-\"):\"*\"==t&&this.pressButton(\"x\")}};document.addEventListener(\"keydown\",x)}updateScreen(e=\"\"){this.screen.innerHTML=e||this.currentNumber,this.fitText(this.screen)}pressButton(e){if(e.isNumber()){for(this.currentNumber+=e;this.currentNumber.startsWith(\"0\")&&\"0\"!=this.currentNumber;)this.currentNumber=this.currentNumber.substring(1,this.currentNumber.length);this.updateScreen()}else switch(e){case\".\":this.currentNumber.includes(\".\")||(\"\"==this.currentNumber&&(this.currentNumber=0),this.currentNumber+=e),this.updateScreen();break;case\"+\":this.setOperation(\"+\");break;case\"-\":this.setOperation(\"-\");break;case\"x\":this.setOperation(\"x\");break;case\"/\":this.setOperation(\"/\");break;case\"=\":this.getAnswer();break;case\"AC\":this.operation=\"\",this.lastNumber=\"\",this.currentNumber=\"\",this.updateScreen(\"0\");break;case\"+/-\":this.currentNumber=(-1*parseFloat(this.currentNumber)).toString(),this.updateScreen();break;case\"%\":this.currentNumber=(parseFloat(this.currentNumber)/100).toString(),this.updateScreen()}}getAnswer(){this.currentNumber||(this.currentNumber=\"0\");let e=parseFloat(this.lastNumber),t=parseFloat(this.currentNumber);switch(this.operation){case\"+\":this.currentNumber=e+t;break;case\"-\":this.currentNumber=e-t;break;case\"x\":this.currentNumber=e*t;break;case\"/\":this.currentNumber=e/t}this.lastNumber=\"\",this.operation=\"\",this.currentNumber=this.currentNumber.toString(),this.updateScreen()}setOperation(e){if(this.currentNumber||(this.currentNumber=this.lastPressed),this.currentNumber&&(this.lastPressed=this.currentNumber),\"\"!=this.operation){this.getAnswer();var t=this.currentNumber}this.operation=e,this.lastNumber=this.currentNumber,this.currentNumber=\"\",t?this.updateScreen(t):this.updateScreen(this.lastNumber),this.resetScreen()}resetScreen(){var e=this.screen.innerHTML;this.screen.innerHTML=\"\",setTimeout(()=>{this.screen.innerHTML=e},100)}fitText(e){this.oldFontSize||(this.oldFontSize=parseFloat(getComputedStyle(e).fontSize)),e.style.fontSize=this.oldFontSize;const t=this.oldFontSize;let a=e,l=a.clientWidth,r=a.scrollWidth,n=parseInt(window.getComputedStyle(a,null).getPropertyValue(\"font-size\"),10);if(r>l)n=(n=Math.ceil(n*l/r,10))>t?n=t:n-1,a.style.fontSize=n+\"px\";else for(;r===l&&n<t;)n=(n=Math.ceil(n)+1)>t?n=t:n,a.style.fontSize=n+\"px\",l=a.clientWidth,(r=a.scrollWidth)>l&&(a.style.fontSize=n-1+\"px\")}createTopBar(){TopBar.addToTop(\"File\",\"file\"),TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"Edit\",\"edit\"),TopBar.addToMenu(\"Copy Answer\",\"edit\",()=>{navigator.clipboard.writeText(this.currentNumber)});let e=navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1;TopBar.addToMenu(\"Paste\",\"edit\",async()=>{var t;if(e){if(null==(t=await prompt(\"Please press \"+(window.navigator.platform.includes(\"Mac\")?\"command\":\"control\")+\"+v.\")))return;t=parseFloat(t)}else t=parseFloat(await navigator.clipboard.readText());isNaN(t)?alert(\"Input must be a number.\"):(this.operation=\"\",this.lastNumber=\"\",this.currentNumber=t.toString(),this.updateScreen())}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Calculator\",\"help\",()=>{About.newWindow(\"Calculator\",\"Do calculations, beautifully.\",\"1.0\",\"assets/calc.png\")}),TopBar.addToMenu(\"Keyboard Shortcuts\",\"help\",()=>{let e=new Window(400,270,\"Calculator Keyboard Shortcuts\",400/em,270/em).getWindow();e.classList.add(\"unselectable\");let t=document.createElement(\"p\");t.style.color=\"black\",t.style.textAlign=\"center\",t.innerHTML=\"<span style='font-weight: bold; font-size: 1.4em;'>Keyboard Shortcuts:</span><br>C to clear<br>Shift+minus to invert sign<br>Percent (%) to get value as a percent<br>Slash (/) to divide<br>X or * to multiply<br>Minus (-) to subtract<br>Plus (+) to add<br>Enter/Return or equal sign (=) to get answer<br>Number keys to type numbers<br>Period (.) key to add a decimal\",e.appendChild(t)})}}appImagePaths.Calculator=\"assets/calc.png\",makeFunctions.Calculator=(()=>{new Calculator});}());",
        "icon":"assets/calc.png"
    }
}