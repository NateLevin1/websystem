{
    "FlyingFish": {
        "name":"FlyingFish",
        "description":"Avoid the obstacles in this arcade game with controls unlike anything you've played before.",
        "tags":"game,flying,fish,fun,arcade,flyingfish",
        "icon": "assets/flying-fish.png",
        "script":"!function(){appImagePaths.FlyingFish=\"assets/flying-fish.png\",makeFunctions.FlyingFish=(()=>{new class{constructor(){let e=new Window(250,352,\"Flying Fish\",27,37,{x:15,y:2.2,topBarCreator:this.createTopBar,thisContext:this,pathToApp:\"/Users/\"+NAME+\"/Applications/FlyingFish.app/\"});this.window=e.getWindow(),this.header=e.getHeader(),this.win=e,this.win.setBackgroundColor(\"black\");let i=document.createElement(\"iframe\");i.src=\"https://natelev.in/portfolio/flying-fish/\",i.style.height=\"calc(100% - 1.2em)\",i.style.width=\"100%\",i.style.margin=\"0\",i.style.border=\"none\",i.innerText=\"Loading Flying Fish from https://natelev.in/portfolio/flying-fish/\",this.window.appendChild(i)}createTopBar(){TopBar.addToTop(\"File\",\"file\"),TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Flying Fish\",\"help\",()=>{About.newWindow(\"Flying Fish\",\"Avoid the obstacles in this arcade game with controls unlike anything you've played before.\",\"1.0\",\"assets/flying-fish.png\")})}}}),document.addEventListener(\"file-system-ready\",()=>{folders[\"/Users/\"+NAME+\"/Applications/FlyingFish.app/\"]||(delete makeFunctions.FlyingFish,delete appImagePaths.FlyingFish)},{once:!0})}();"
    },
    "Calculator": {
        "name":"Calculator",
        "description":"Do calculations, beautifully.",
        "tags":"calc,number,calculations,calculator",
        "script":"(function(){GlobalStyle.newClass(\"calc-screen-container\",\"background-color: #8c8c8c;\",\"width:100%;\",\"height: 30%;\"),GlobalStyle.newClass(\"calc-screen\",\"position: absolute;\",\"top: 10%;\",\"width: 99%;\",\"font-size: 4em;\",\"text-align: right;\"),GlobalStyle.newClass(\"calc-button\",\"display: table-cell;\",\"background-color: rgba(180,180,180,0.3);\",\"border: 0.2em solid black;\",\"text-align: center;\",\"vertical-align: middle;\",\"transition: background-color 0.03s;\",\"font-size: 1.3em;\"),GlobalStyle.newClass(\"calc-button:active\",\"background-color: rgba(255, 255, 255, 0.4);\"),GlobalStyle.newClass(\"calc-button-container\",\"display:table;\",\"width:100%;\",\"height:calc(100% - 30%);\"),GlobalStyle.newClass(\"calc-button-row\",\"display: table-row;\",\"height:20%;\"),GlobalStyle.newClass(\"calc-modifier\",\"background-color: rgba(255, 159, 12, 0.8);\"),GlobalStyle.newClass(\"calc-modifier:active\",\"background-color: rgba(255, 159, 12, 1);\"),GlobalStyle.newClass(\"calc-0\",\"border-right:none;\"),GlobalStyle.newClass(\"calc-0-2\",\"border-left:none;\",\"color: rgba(0,0,0,0);\");class Calculator{constructor(){this.operation=\"\",this.lastNumber=\"\",this.currentNumber=\"\",this.oldFontSize=\"\";let e=new Window(195,352,\"Calculator\",20,35,{x:20,y:2.2,topBarCreator:this.createTopBar,thisContext:this,pathToApp:\"/Users/\"+NAME+\"/Applications/Calculator.app/\",maximizeDisabled:!0});this.window=e.getWindow(),this.header=e.getHeader(),this.win=e,this.win.setBackgroundColor(\"rgb(40,40,40)\"),this.window.style.color=\"white\";let t=document.createElement(\"div\");t.style.height=\"calc(100% - 1.2em)\",this.window.appendChild(t);let a=document.createElement(\"div\");a.classList.add(\"calc-screen-container\");let l=document.createElement(\"div\");a.appendChild(l),l.innerHTML=\"0\",l.classList.add(\"calc-screen\"),this.fitText(l),t.appendChild(a);let r=document.createElement(\"div\");r.classList.add(\"calc-button-container\"),t.appendChild(r);let n=document.createElement(\"div\");n.classList.add(\"calc-button-row\"),r.appendChild(n);let i=document.createElement(\"div\");i.classList.add(\"calc-button-row\"),r.appendChild(i);let c=document.createElement(\"div\");c.classList.add(\"calc-button-row\"),r.appendChild(c);let s=document.createElement(\"div\");s.classList.add(\"calc-button-row\"),r.appendChild(s);let o=document.createElement(\"div\");o.classList.add(\"calc-button-row\"),r.appendChild(o);let d=document.createElement(\"div\");d.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),d.innerHTML=\"AC\",d.title=\"All Clear (or press c)\",n.appendChild(d);let u=document.createElement(\"div\");u.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),u.innerHTML=\"+/-\",u.title=\"Negate the sign of the current value (or press shift-minus)\",n.appendChild(u);let b=document.createElement(\"div\");b.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),b.innerHTML=\"%\",b.title=\"Percent (or press %)\",n.appendChild(b);let h=document.createElement(\"div\");h.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),h.innerHTML=\"/\",h.title=\"Divide (or press /)\",n.appendChild(h);let p=document.createElement(\"div\");p.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),p.innerHTML=\"7\",i.appendChild(p);let m=document.createElement(\"div\");m.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),m.innerHTML=\"8\",i.appendChild(m);let w=document.createElement(\"div\");w.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),w.innerHTML=\"9\",i.appendChild(w);let C=document.createElement(\"div\");C.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),C.innerHTML=\"x\",C.title=\"Multiply (or press x or *)\",i.appendChild(C);let L=document.createElement(\"div\");L.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),L.innerHTML=\"4\",c.appendChild(L);let T=document.createElement(\"div\");T.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),T.innerHTML=\"5\",c.appendChild(T);let g=document.createElement(\"div\");g.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),g.innerHTML=\"6\",c.appendChild(g);let v=document.createElement(\"div\");v.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),v.innerHTML=\"-\",v.title=\"Subtract (or press -)\",c.appendChild(v);let N=document.createElement(\"div\");N.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),N.innerHTML=\"1\",s.appendChild(N);let k=document.createElement(\"div\");k.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),k.innerHTML=\"2\",s.appendChild(k);let S=document.createElement(\"div\");S.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),S.innerHTML=\"3\",s.appendChild(S);let y=document.createElement(\"div\");y.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),y.innerHTML=\"+\",y.title=\"Add (or press +)\",s.appendChild(y);let f=document.createElement(\"div\");f.classList.add(\"calc-button\",\"calc-0\",\"unselectable\",\"clickable\"),f.innerHTML=\"0\",o.appendChild(f);let E=document.createElement(\"div\");E.classList.add(\"calc-button\",\"calc-0-2\",\"unselectable\",\"clickable\"),E.innerHTML=\"0\",o.appendChild(E);let M=document.createElement(\"div\");M.classList.add(\"calc-button\",\"unselectable\",\"clickable\"),M.innerHTML=\".\",M.title=\"Add a decimal point (or press .)\",o.appendChild(M);let H=document.createElement(\"div\");H.classList.add(\"calc-button\",\"calc-modifier\",\"unselectable\",\"clickable\"),H.innerHTML=\"=\",H.title=\"Equal (or press enter or =)\",o.appendChild(H),this.window.querySelectorAll(\".calc-button\").forEach(e=>{e.onclick=(()=>{this.pressButton(e.innerHTML)})}),this.screen=l;const x=e=>{if(void 0===this.win&&document.removeEventListener(\"keydown\",x),void 0!==this.win&&this.win.focused()){let t=e.key;this.pressButton(t),\"c\"==t||\"C\"==t?e.ctrlKey||e.metaKey?(e.preventDefault(),navigator.clipboard.writeText(this.currentNumber)):this.pressButton(\"AC\"):\"Enter\"==t?this.pressButton(\"=\"):\"_\"==t?this.pressButton(\"+/-\"):\"*\"==t&&this.pressButton(\"x\")}};document.addEventListener(\"keydown\",x)}updateScreen(e=\"\"){this.screen.innerHTML=e||this.currentNumber,this.fitText(this.screen)}pressButton(e){if(e.isNumber()){for(this.currentNumber+=e;this.currentNumber.startsWith(\"0\")&&\"0\"!=this.currentNumber;)this.currentNumber=this.currentNumber.substring(1,this.currentNumber.length);this.updateScreen()}else switch(e){case\".\":this.currentNumber.includes(\".\")||(\"\"==this.currentNumber&&(this.currentNumber=0),this.currentNumber+=e),this.updateScreen();break;case\"+\":this.setOperation(\"+\");break;case\"-\":this.setOperation(\"-\");break;case\"x\":this.setOperation(\"x\");break;case\"/\":this.setOperation(\"/\");break;case\"=\":this.getAnswer();break;case\"AC\":this.operation=\"\",this.lastNumber=\"\",this.currentNumber=\"\",this.updateScreen(\"0\");break;case\"+/-\":this.currentNumber=(-1*parseFloat(this.currentNumber)).toString(),this.updateScreen();break;case\"%\":this.currentNumber=(parseFloat(this.currentNumber)/100).toString(),this.updateScreen()}}getAnswer(){this.currentNumber||(this.currentNumber=\"0\");let e=parseFloat(this.lastNumber),t=parseFloat(this.currentNumber);switch(this.operation){case\"+\":this.currentNumber=e+t;break;case\"-\":this.currentNumber=e-t;break;case\"x\":this.currentNumber=e*t;break;case\"/\":this.currentNumber=e/t}this.lastNumber=\"\",this.operation=\"\",this.currentNumber=this.currentNumber.toString(),this.updateScreen()}setOperation(e){if(this.currentNumber||(this.currentNumber=this.lastPressed),this.currentNumber&&(this.lastPressed=this.currentNumber),\"\"!=this.operation){this.getAnswer();var t=this.currentNumber}this.operation=e,this.lastNumber=this.currentNumber,this.currentNumber=\"\",t?this.updateScreen(t):this.updateScreen(this.lastNumber),this.resetScreen()}resetScreen(){var e=this.screen.innerHTML;this.screen.innerHTML=\"\",setTimeout(()=>{this.screen.innerHTML=e},100)}fitText(e){this.oldFontSize||(this.oldFontSize=parseFloat(getComputedStyle(e).fontSize)),e.style.fontSize=this.oldFontSize;const t=this.oldFontSize;let a=e,l=a.clientWidth,r=a.scrollWidth,n=parseInt(window.getComputedStyle(a,null).getPropertyValue(\"font-size\"),10);if(r>l)n=(n=Math.ceil(n*l/r,10))>t?n=t:n-1,a.style.fontSize=n+\"px\";else for(;r===l&&n<t;)n=(n=Math.ceil(n)+1)>t?n=t:n,a.style.fontSize=n+\"px\",l=a.clientWidth,(r=a.scrollWidth)>l&&(a.style.fontSize=n-1+\"px\")}createTopBar(){TopBar.addToTop(\"File\",\"file\"),TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"Edit\",\"edit\"),TopBar.addToMenu(\"Copy Answer\",\"edit\",()=>{navigator.clipboard.writeText(this.currentNumber)});let e=navigator.userAgent.toLowerCase().indexOf(\"firefox\")>-1;TopBar.addToMenu(\"Paste\",\"edit\",async()=>{var t;if(e){if(null==(t=await prompt(\"Please press \"+(window.navigator.platform.includes(\"Mac\")?\"command\":\"control\")+\"+v.\")))return;t=parseFloat(t)}else t=parseFloat(await navigator.clipboard.readText());isNaN(t)?alert(\"Input must be a number.\"):(this.operation=\"\",this.lastNumber=\"\",this.currentNumber=t.toString(),this.updateScreen())}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Calculator\",\"help\",()=>{About.newWindow(\"Calculator\",\"Do calculations, beautifully.\",\"1.0\",\"assets/calc.png\")}),TopBar.addToMenu(\"Keyboard Shortcuts\",\"help\",()=>{let e=new Window(400,270,\"Calculator Keyboard Shortcuts\",400/em,270/em).getWindow();e.classList.add(\"unselectable\");let t=document.createElement(\"p\");t.style.color=\"black\",t.style.textAlign=\"center\",t.innerHTML=\"<span style='font-weight: bold; font-size: 1.4em;'>Keyboard Shortcuts:</span><br>C to clear<br>Shift+minus to invert sign<br>Percent (%) to get value as a percent<br>Slash (/) to divide<br>X or * to multiply<br>Minus (-) to subtract<br>Plus (+) to add<br>Enter/Return or equal sign (=) to get answer<br>Number keys to type numbers<br>Period (.) key to add a decimal\",e.appendChild(t)})}}appImagePaths.Calculator=\"assets/calc.png\",makeFunctions.Calculator=(()=>{new Calculator});}());",
        "icon":"assets/calc.png"
    },
    "Documenter": {
        "name":"Documenter",
        "description":"All things documents in WebSystem.",
        "tags":"document,word,pages,office,documenter,doc,html,txt",
        "icon": "assets/documenter.png",
        "script":"!function(){class e{constructor(e,t){t?this.extension=folders[t].extension:(e=\"Untitled\",t=\"\",this.extension=\"html\"),this.path=t;let n=\"Documenter - \"+e;this.title=n,this.filename=e;let i=new Window(260,370,n,37,35,{x:5,y:4,topBarCreator:this.createTopBar,thisContext:this,pathToApp:\"/Users/\"+NAME+\"/Applications/Documenter.app/\"});this.window=i.getWindow(),this.header=i.getHeader(),this.win=i;let o=document.createElement(\"div\");o.style.height=\"calc(100% - 1.2em)\",o.classList.add(\"documenter-container\"),this.window.appendChild(o);let a=document.createElement(\"div\");a.style.height=\"calc(100% - 2em)\",a.classList.add(\"documenter-editable-container\");let d=document.createElement(\"div\");var s;d.classList.add(\"documenter-editable\"),a.appendChild(d),this.page=d,t&&(s=folders[t].content),s&&(d.innerHTML=s.replace(/\\n/g,\"<br>\"));let r=[\"heading\",\"|\",\"fontFamily\",\"fontSize\",\"fontColor\",\"fontBackgroundColor\",\"|\",\"bold\",\"italic\",\"underline\",\"strikethrough\",\"|\",\"alignment\",\"|\",\"numberedList\",\"bulletedList\",\"|\",\"indent\",\"outdent\",\"|\",\"link\",\"blockQuote\",\"insertTable\",\"mediaEmbed\",\"|\",\"undo\",\"redo\"];\"txt\"==this.extension&&(r=[\"numberedList\",\"bulletedList\",\"|\",\"undo\",\"redo\"]),DecoupledEditor.create(d,{toolbar:r,placeholder:\"Type here...\"}).then(e=>{this.editor=e;const n=document.createElement(\"div\");n.style.height=\"2em\",n.classList.add(\"documenter-toolbar\"),o.appendChild(n),n.appendChild(e.ui.view.toolbar.element),o.appendChild(a),this.currentSavedValue=e.getData(),this.needsToSave=!t,this.checkIfNeedsToSave()}).catch(e=>{console.error(e)});const l=e=>{void 0===this.win&&document.removeEventListener(\"keydown\",l),void 0!==this.win&&this.win.focused()&&(window.navigator.platform.match(\"Mac\")?e.metaKey:e.ctrlKey)&&83==e.keyCode&&(e.preventDefault(),this.save())};document.addEventListener(\"keydown\",l),d.addEventListener(\"keyup\",()=>{this.checkIfNeedsToSave()}),this.window.addEventListener(\"window-destroy\",e=>{this.needsToSave&&(this.path||this.editor.getData())&&(e.preventClose=!0,e.message=\"Are you sure you want to exit? You have not saved your work.\")})}createTopBar(){TopBar.addToTop(\"File\",\"file\");let t=TopBar.addToMenu(\"Export  ▶\",\"file\",void 0,{clickable:!1});TopBar.addSecondaryListenerForItem({el:t,name:\"export\"}),TopBar.addToMenu(\"Print\",\"export\",()=>{this.print()}),TopBar.addToMenu(\"Save\",\"file\",this.save.bind(this)),TopBar.addToMenu(\"Save As\",\"file\",this.saveAs.bind(this)),TopBar.addToMenuIf(()=>\"html\"==this.extension,\"Save as .txt\",\"file\",()=>{prompt(\"Please enter a name for the file\",this.filename.replace(\".html\",\".txt\")).then(t=>{t&&(t.endsWith(\".txt\")&&(t=t.substring(0,t.length-4)),FileSystemGUI.requestDirectory().then(n=>{let i=this.editor.getData(),o=this.htmlToTXT(i);FileSystem.addFileAtLocation(t+\".txt\",o,\"Text\",n)[0].then(()=>{new e(t+\".txt\",n+t+\".txt/\")})}).catch(()=>{}))})},{thisContext:this}),TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"Edit\",\"edit\"),TopBar.addToMenu(\"Select All\",\"edit\",()=>{setTimeout(()=>{this.page.focus(),setTimeout(()=>{this.editor.execute(\"selectAll\")},2)},2)}),TopBar.addLineToMenu(\"edit\"),TopBar.addToMenu(\"Bold\",\"edit\",()=>{this.editor.execute(\"bold\")}),TopBar.addToMenu(\"Italic\",\"edit\",()=>{this.editor.execute(\"italic\")}),TopBar.addToMenu(\"Underline\",\"edit\",()=>{this.editor.execute(\"underline\")}),TopBar.addToMenu(\"Strikethrough\",\"edit\",()=>{this.editor.execute(\"strikethrough\")}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Documenter\",\"help\",()=>{About.newWindow(\"Documenter\",\"An implementation of CKEditor 5 in WebSystem.\",\"1.0\",\"assets/documenter.png\")})}save(){if(this.path){let e=this.editor.getData();this.currentSavedValue=e,\"txt\"==this.extension&&(e=this.htmlToTXT(e.replace(/<br>/g,\"\"))),FileSystem.updateContent(this.path,e),this.checkIfNeedsToSave()}else this.saveAs()}saveAs(e=\"html\"){prompt(\"Please enter a name for the file\").then(t=>{t&&(t.endsWith(\".\"+e)&&(t=t.substring(0,t.length-(e.length+1))),FileSystemGUI.requestDirectory().then(n=>{FileSystem.addFileAtLocation(t+\".\"+e,this.editor.getData(),\"Text\",n),this.path=n+t+\".\"+e+\"/\",this.currentSavedValue=this.editor.getData(),this.title=\"Documenter - \"+t+\".\"+e,this.checkIfNeedsToSave()}).catch(()=>{}))})}checkIfNeedsToSave(){return this.path?this.editor.getData()==this.currentSavedValue||this.needsToSave?this.needsToSave?(this.needsToSave=!1,this.win.setTitle(this.title),!1):void 0:(this.needsToSave=!0,this.win.setTitle(this.title+\" *\"),!0):(this.win.setTitle(this.title+\" *\"),!0)}print(){1==this.needsToSave&&confirm(\"You have unsaved changes. Save before continuing?\").then(e=>{if(e){this.save(),this.checkIfNeedsToSave();let e=this.editor.getData();var t=document.createElement(\"iframe\");document.body.appendChild(t),t.style.position=\"fixed\",t.style.right=\"0\",t.style.bottom=\"0\",t.style.width=\"0\",t.style.height=\"0\",t.style.border=\"0\",t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.write(\"                    <style>                        body {                            font-family: sans-serif;                            font-size:1em;                            -webkit-print-color-adjust: exact;                        }                        blockquote {                            font-family: Georgia, serif;                            padding-left: 2em;                            margin-left:0;                            border-left: 4px solid black;                        }                        .text-tiny {                            font-size: 0.7em;                        }                        .text-small {                            font-size: 0.9em;                        }                        .text-big {                            font-size:1.5em;                        }                        .text-huge {                            font-size:2em;                        }                    <\\/style>                    \"),t.contentWindow.document.close(),setTimeout(()=>{t.contentWindow.onafterprint=(()=>{t.remove()}),t.contentWindow.print()},200)}})}htmlToTXT(e){let t=e;return t=(t=(t=(t=(t=(t=(t=t.replace(/<ol>((?:<li>[^<]+<\\/li>)+)<\\/ol>/gi,(e,t)=>{let n=\"\";return[...t.matchAll(/<li>([^<]+)<\\/li>/g)].forEach((e,t)=>{n+=(t+1).toString()+\". \"+e[1]+\"\"}),n})).replace(/<ul>((?:<li>[^<]+<\\/li>)+)<\\/ul>/gi,(e,t)=>{let n=\"\";return[...t.matchAll(/<li>([^<]+)<\\/li>/g)].forEach(e=>{n+=\"• \"+e[1]+\"\"}),n})).replace(/<[^/>]+>/gi,\"\")).replace(/(?:<\\/p>$|<\\/li>$|<\\/ol>$|<\\/hd>$|<\\/pre>$|<\\/div>$|<\\/ul>$)/gi,\"\")).replace(/(?:<\\/p>|<\\/li>|<\\/ol>|<\\/hd>|<\\/pre>|<\\/div>|<\\/ul>)/gi,\"\")).replace(/<\\/[^>]+>/gi,\"\")).replace(/&nbsp;/g,\"\")}}appImagePaths.Documenter=\"assets/documenter.png\",makeFunctions.Documenter=(()=>{new e}),openPossibilities.Text=((t,n)=>{new e(t,n)}),document.addEventListener(\"file-system-ready\",()=>{folders[\"/Users/\"+NAME+\"/Applications/Documenter.app/\"]?fileNewPossibilities.push({name:\"Document\",callback:e=>{FileSystem.addFileAtLocation(\"New File.html\",\"\",\"Text\",e)}}):(delete makeFunctions.Documenter,delete appImagePaths.Documenter)},{once:!0}),GlobalStyle.addRaw(\".documenter-container {    /* This element is a flex container for easier rendering. */    display: flex;    flex-flow: column nowrap;}\"),GlobalStyle.addRaw(\".documenter-toolbar {    /* Create the illusion of the toolbar floating over the editable. */    box-shadow: 0 0 5px hsla( 0,0%,0%,.2 );    /* Use the CKEditor CSS variables to keep the UI consistent. */    border-bottom: 1px solid var(--ck-color-toolbar-border);}\"),GlobalStyle.addRaw(\".documenter-toolbar .ck-toolbar {    border: 0;    border-radius: 0;}\"),GlobalStyle.addRaw('/* Make the editable container look like the inside of a native word processor application. */.documenter-editable-container {    padding: calc( 2 * var(--ck-spacing-large) );    background: var(--ck-color-base-foreground);    max-width:100%;    /* Make it possible to scroll the \"page\" of the edited content. */    overflow-y: scroll;    padding-left: 1em;}.documenter-editable {    max-width:100%;}.documenter-editable-container .ck-editor__editable {    /* Set the dimensions of the \"page\". */    width: 15.8cm;    min-height: 21cm;    /* Keep the \"page\" off the boundaries of the container. */    padding: 1cm 2cm 2cm;    border: 1px hsl( 0,0%,82.7% ) solid;    border-radius: var(--ck-border-radius);    background: white;    /* The \"page\" should cast a slight shadow (3D illusion). */    box-shadow: 0 0 5px hsla( 0,0%,0%,.1 );    /* Center the \"page\". */    margin: 0 auto;}'),GlobalStyle.addRaw(\"/* Make the block quoted text serif with some additional spacing. */.document-editor .ck-content blockquote {    font-family: Georgia, serif;    margin-left: calc( 2 * var(--ck-spacing-large) );    margin-right: calc( 2 * var(--ck-spacing-large) );}\")}();"
    },
    "Music": {
        "name":"Music",
        "description":"Play your favorite tunes.",
        "tags":"music,songs,song,player,audio,mp3,wav",
        "icon": "assets/musicPlayer.png",
        "script":"!function(){class e{constructor(e=\"\",n=\"\"){var t;t=e&&n?new Window(390,142,\"Music\",390/em,142/em,{x:20,y:2.2,topBarCreator:this.createTopBar,thisContext:this,appName:\"Music Player - \"+e,pathToApp:\"/Users/\"+NAME+\"/Applications/Music.app/\"}):new Window(280,380,\"Music\",25,25,{x:10,y:2.2,topBarCreator:this.createStandaloneTopBar,thisContext:this,pathToApp:\"/Users/\"+NAME+\"/Applications/Music.app/\"}),this.window=t.getWindow(),this.window.classList.add(\"unselectable\"),this.header=t.getHeader(),this.win=t,this.win.setBackgroundColor(\"rgba(230, 230, 230, 0.9)\"),this.window.classList.add(\"heavy-blurred\"),this.contentContainer=document.createElement(\"div\"),this.contentContainer.style.height=\"calc(100% - 1.2em)\",this.contentContainer.style.color=\"rgb(40, 40, 40)\",this.window.appendChild(this.contentContainer),e&&n?(this.win.disableResize(),this.openSong(e,n)):this.openStandalone()}openSong(e,n){let t=\"Unknown\";e.includes(\".\")&&(e=e.substring(0,e.lastIndexOf(\".\")));let s=folders[n].content.mediaTags;var i=\"assets/music.png\";s&&(e=s.tags.title,t=s.tags.artist,i=getThumbnail(s));let a=document.createElement(\"img\");a.src=i,a.classList.add(\"music-song-thumbnail\"),this.contentContainer.appendChild(a);let o=document.createElement(\"div\");o.classList.add(\"music-song-info\"),this.contentContainer.appendChild(o);let l=document.createElement(\"div\");l.classList.add(\"music-song-title\"),l.innerHTML=e,o.appendChild(l);let r=document.createElement(\"div\");r.classList.add(\"music-song-artist\"),r.innerHTML=t,o.appendChild(r);let d=document.createElement(\"audio\");d.src=URL.createObjectURL(files[n]),d.volume=volume/100,o.appendChild(d),d.play(),this.playing=!0;let c=document.createElement(\"img\");c.src=\"assets/licensed/pause.png\",c.classList.add(\"music-play-pause\"),c.onclick=(()=>{this.playing?(this.playing=!1,d.pause(),c.src=\"assets/licensed/play.png\"):(this.playing=!0,d.play(),c.src=\"assets/licensed/pause.png\")}),this.playPause=c,o.appendChild(c),d.addEventListener(\"ended\",()=>{this.playing=!1}),d.onloadedmetadata=(()=>{let n=d.duration,i=document.createElement(\"input\");i.type=\"range\",i.classList.add(\"music-song-range\"),i.min=0,i.max=n,i.step=\"0.05\",i.value=d.currentTime;let a=Math.floor(n/60).toString()+\":\"+Math.floor(n%60).toString().padStart(2,\"0\"),l=document.createElement(\"div\");if(l.innerText=\"0:00/\"+a,l.classList.add(\"music-song-timestamp\"),o.appendChild(l),i.onmousedown=(()=>{clearInterval(this.songAnimation)}),i.onmouseup=(()=>{d.currentTime=i.value,this.playing||(this.playing=!0,d.play(),this.playPause.src=\"assets/licensed/pause.png\"),this.songAnimation=setInterval(()=>{window.requestAnimationFrame(()=>{((e,n)=>{i.value=e;let t=Math.floor(e/60).toString(),s=Math.floor(e%60).toString();l.innerText=t+\":\"+s.padStart(2,\"0\")+\"/\"+n})(d.currentTime,a)})},50)}),o.appendChild(i),this.songAnimation=setInterval(()=>{window.requestAnimationFrame(()=>{((e,n)=>{i.value=e;let t=Math.floor(e/60).toString(),s=Math.floor(e%60).toString();l.innerText=t+\":\"+s.padStart(2,\"0\")+\"/\"+n})(d.currentTime,a)})},50),this.window.addEventListener(\"window-destroy\",()=>{clearInterval(this.songAnimation)}),s&&!OFFLINE&&s.tags.title){let n=document.createElement(\"button\");this.contentContainer.style.maxHeight=\"8em\",n.innerText=\"Get Lyrics\",n.classList.add(\"music-song-lyrics-button\");let s=!1,a=\"\",o=document.createElement(\"div\");o.innerText=a,o.classList.add(\"music-song-lyrics-text\"),o.style.display=\"none\",this.window.appendChild(o),n.onclick=(()=>{if((s=!s)||(o.style.display=\"none\",n.innerText=\"Show Lyrics\",this.window.style.height=\"8.875em\",i.style.top=\"53%\",c.style.top=\"50%\"),s){if(o.style.display=\"block\",!a){a=\"\",o.innerText=\"Fetching lyrics... (This may take a few seconds)\";let n=new AbortController,s=n.signal,i=setTimeout(()=>{n.abort(),a=\"Could not find any lyrics for this song.\",o.innerText=a},7e3);fetch(\"https://canarado-lyrics.p.rapidapi.com/lyrics/\"+encodeURIComponent(e.toLowerCase().substring(0,e.indexOf(\"(\"))+\" \"+t.toLowerCase()),{signal:s,method:\"GET\",headers:{\"x-rapidapi-host\":\"canarado-lyrics.p.rapidapi.com\",\"x-rapidapi-key\":keys.lyrics}}).then(e=>e.json()).then(n=>{clearTimeout(i),\"200\"==n.status.code?(n.content.forEach(n=>{a||(t.toLowerCase().includes(n.artist.toLowerCase())||e.toLowerCase().includes(n.title.toLowerCase()))&&(\"[Instrumental]\"==n.lyrics&&(n.lyrics=\"This song is instrumental.\"),a=n.lyrics,o.innerText=a)}),a||(a=\"Could not find any matching lyrics for this song.\",o.innerText=a)):(a=\"There was an error fetching the lyrics.\",o.innerText=a)}).catch(e=>{a=\"There was an error fetching the lyrics.\",o.innerText=a})}n.innerText=\"Hide Lyrics\",this.window.style.height=\"25em\",i.style.top=\"19%\",c.style.top=\"17.8%\"}}),this.window.appendChild(n)}})}openStandalone(){this.win.setBackgroundColor(\"rgba(250, 250, 250, 0.9)\");let e=this.getAllMusic(),n=document.createElement(\"div\");n.classList.add(\"music-standalone-top\"),n.innerHTML=\"All Music\",this.contentContainer.appendChild(n);let t=document.createElement(\"div\");if(t.classList.add(\"music-standalone-scroll\"),this.contentContainer.appendChild(t),this.scroll=t,this.addSongsToDisplay(e,t),0==e.length){let e=document.createElement(\"div\");e.style.textAlign=\"center\",e.style.fontSize=\"1.2em\",e.style.marginTop=\"2em\",e.textContent=\"No songs on disk.\",t.appendChild(e)}}getAllMusic(){let e=[];for(const n in files)try{files[n].type.startsWith(\"audio\")&&e.push(n)}catch(e){}return e}addSongsToDisplay(n,t){t.innerHTML=\"\",n.forEach((n,s)=>{let i=folders[n].content.mediaTags,a=\"Unknown\",o=folders[n].name;o=folders[n].name.substring(0,o.lastIndexOf(\".\"));let l=\"assets/music.png\";i&&(a=i.tags.artist,l=getThumbnail(i),o=i.tags.title);let r=document.createElement(\"div\");r.classList.add(\"music-standalone-song\"),s%2==0?r.classList.add(\"music-standalone-a\"):r.classList.add(\"music-standalone-b\");let d=document.createElement(\"img\");d.src=l,d.classList.add(\"music-standalone-thumbnail\"),r.appendChild(d);let c=document.createElement(\"div\");c.classList.add(\"music-standalone-song-info\"),r.appendChild(c);let p=document.createElement(\"div\");p.classList.add(\"music-standalone-song-title\"),p.innerText=o,c.appendChild(p);let u=document.createElement(\"div\");u.classList.add(\"music-standalone-song-artist\"),u.innerText=a,c.appendChild(u);let m=document.createElement(\"button\");m.classList.add(\"music-standalone-song-play\"),m.innerText=\"Play\",m.onclick=(()=>{new e(o,n)}),r.appendChild(m),t.appendChild(r)})}createTopBar(){TopBar.addToTop(\"File\",\"file\"),TopBar.addToMenu(\"Find Songs\",\"file\",()=>{new e}),TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Music Player\",\"help\",()=>{About.newWindow(\"Music Player\",\"The official Music Player for WebSystem.\",\"1.0\",\"assets/music.png\")})}createStandaloneTopBar(){TopBar.addToTop(\"File\",\"file\"),TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"View\",\"view\"),TopBar.addToMenu(\"Scan For New Songs\",\"view\",()=>{this.addSongsToDisplay(this.getAllMusic(),this.scroll)}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Music\",\"help\",()=>{About.newWindow(\"Music\",\"The Music app finds all music on your device.\",\"1.0\",\"assets/music.png\")})}}appImagePaths.Music=\"assets/musicPlayer.png\",makeFunctions.Music=(()=>{new e}),openPossibilities.Music=((n,t)=>{new e(n,t)}),document.addEventListener(\"file-system-ready\",()=>{folders[\"/Users/\"+NAME+\"/Applications/Music.app/\"]||(delete makeFunctions.Music,delete appImagePaths.Music)},{once:!0}),GlobalStyle.newClass(\"music-song-title\",\"overflow: hidden;\",\"white-space: nowrap;\",\"text-overflow: ellipsis;\",\"text-align: center;\",\"margin-top:5px;\"),GlobalStyle.newClass(\"music-song-artist\",\"overflow: hidden;\",\"white-space: nowrap;\",\"text-overflow: ellipsis;\",\"text-align: center;\",\"font-size:0.8em;\"),GlobalStyle.newClass(\"music-song-thumbnail\",\"width:30%;\",\"height:100%;\",\"display: inline-block;\"),GlobalStyle.newClass(\"music-song-info\",\"display: inline-block;\",\"height:100%;\",\"vertical-align: top;\",\"font-size:1.3em;\",\"width:70%;\"),GlobalStyle.newClass(\"music-play-pause\",\"margin-left:0.5em;\",\"width: 1.7em;\",\"max-width: 10%;\",\"transition: width 0.2s;\",\"position: absolute;\",\"top: 50%;\"),GlobalStyle.newClass(\"music-play-pause:hover\",\"width: 1.8em;\"),GlobalStyle.newClass(\"music-song-range\",\"position: absolute;\",\"top: 53%;\",\"right:3%;\",\"max-width:53%;\"),GlobalStyle.newClass(\"music-song-timestamp\",\"position: relative;\",\"top: 38%;\",\"left:2%;\",\"max-width:0%;\"),GlobalStyle.newClass(\"music-searching-text\",\"position: absolute;\",\"top: 50%;\",\"left: 50%;\",\"transform: translate(-50%,-50%);\",\"font-size: 2em;\",\"text-align: center;\"),GlobalStyle.newClass(\"music-song-lyrics-button\",\"position: absolute;\",\"bottom:2%;\",\"right:2%;\",\"font-size:0.7em;\"),GlobalStyle.newClass(\"music-song-lyrics-text\",\"width: 100%;\",\"padding-top: 2%;\",\"height: 50%;\",\"overflow: auto;\",\"color:black;\",\"margin-left:0.2em;\"),GlobalStyle.newClass(\"music-standalone-top\",\"border-bottom: 2px solid black;\",\"font-size:2em;\",\"text-align:center;\"),GlobalStyle.newClass(\"music-standalone-scroll\",\"overflow-y:auto;\",\"overflow-x: hidden;\",\"height:calc(100% - 2.9em);\"),GlobalStyle.newClass(\"music-standalone-a\",\"background-color: rgb(250,250,250);\"),GlobalStyle.newClass(\"music-standalone-b\",\"background-color: rgb(230,230,230);\"),GlobalStyle.newClass(\"music-standalone-song\",\"width:100%;\"),GlobalStyle.newClass(\"music-standalone-song-info\",\"max-width: 45%;\",\"display: inline-block;\",\"vertical-align: top;\",\"margin-top:0.5em;\"),GlobalStyle.newClass(\"music-standalone-song-title\",\"display:inline-block;\",\"padding-left:4px;\",\"padding-top:4px;\",\"max-width: 100%;\",\"overflow: hidden;\",\"white-space: nowrap;\",\"text-overflow: ellipsis;\"),GlobalStyle.newClass(\"music-standalone-song-play\",\"display: inline-block;\",\"vertical-align: top;\",\"margin-top:0.7em;\",\"float: right;\",\"font-size:1em;\",\"min-width:6em;\",\"margin-right:0.3em;\"),GlobalStyle.newClass(\"music-standalone-song-artist\",\"font-size:0.7em;\",\"display:block;\",\"padding-left:4px;\",\"max-width: 100%;\",\"overflow: hidden;\",\"white-space: nowrap;\",\"text-overflow: ellipsis;\"),GlobalStyle.newClass(\"music-standalone-thumbnail\",\"max-height:4em;\"),GlobalStyle.addRaw(\"input[type=range].music-song-range {    width: 100%;    margin: 5.5px 0;    background-color: transparent;    -webkit-appearance: none;  }  input[type=range].music-song-range:focus {    outline: none;  }  input[type=range].music-song-range::-webkit-slider-runnable-track {    background: #484d4d;    border: 0;    width: 100%;    height: 15px;    cursor: pointer;  }  input[type=range].music-song-range::-webkit-slider-thumb {    margin-top: -5.5px;    width: 12px;    height: 26px;    background: #ff4300;    border: 0;    cursor: pointer;    -webkit-appearance: none;  }  input[type=range].music-song-range:focus::-webkit-slider-runnable-track {    background: #575d5d;  }  input[type=range].music-song-range::-moz-range-track {    background: #484d4d;    border: 0;    width: 100%;    height: 15px;    cursor: pointer;  }  input[type=range].music-song-range::-moz-range-thumb {    width: 12px;    height: 26px;    background: #ff4300;    border: 0;    cursor: pointer;  }  input[type=range].music-song-range::-ms-track {    background: transparent;    border-color: transparent;    border-width: 5.5px 0;    color: transparent;    width: 100%;    height: 15px;    cursor: pointer;  }  input[type=range].music-song-range::-ms-fill-lower {    background: #393d3d;    border: 0;  }  input[type=range].music-song-range::-ms-fill-upper {    background: #484d4d;    border: 0;  }  input[type=range].music-song-range::-ms-thumb {    width: 12px;    height: 26px;    background: #ff4300;    border: 0;    cursor: pointer;    margin-top: 0px;    /*Needed to keep the Edge thumb centred*/  }  input[type=range].music-song-range:focus::-ms-fill-lower {    background: #484d4d;  }  input[type=range].music-song-range:focus::-ms-fill-upper {    background: #575d5d;  }  @supports (-ms-ime-align:auto) {    /* Pre-Chromium Edge only styles, selector taken from hhttps://stackoverflow.com/a/32202953/7077589 */    input[type=range].music-song-range {      margin: 0;      /*Edge starts the margin from the thumb, not the track as other browsers do*/    }  }\")}();"
    },
    "Image Viewer": {
        "name":"Image Viewer",
        "description":"View all of your images inside WebSystem.",
        "tags":"image,viewer,image viewer,photo,photo viewer,picture,picture viewer,png,jpg,jpeg,gif",
        "icon": "assets/imageviewer.png",
        "script":"!function(){class e{constructor(e,t){if(!e&&!t)return this.standalone=!0,void this.openInStandalone();this.standalone=!1;var i=document.createElement(\"img\");files[t]?(i.src=URL.createObjectURL(files[t]),i.style.minHeight=\"40px\"):console.error(\"No value for files[path] with path \"+t),this.img=i,i.onload=function(){let t=i.cloneNode();t.style.display=\"none\",document.body.appendChild(t),t.onload=function(){var o;let s=[t.naturalWidth+4,t.naturalHeight+em+4,t.naturalWidth/em+.2,(t.naturalHeight+em)/em+.2];t.naturalWidth>30*em&&(s[0]=15*em,s[2]=30,i.style.maxWidth=\"90%\"),t.naturalHeight>30*em&&(s[1]=15*em,s[3]=29),document.body.removeChild(t),this.zoomed=!1,(o=new Window(Math.max(s[0],80),Math.max(s[1],80+em),e,Math.max(s[2],80/em),Math.max(s[3],80/em+1),{x:3,y:3,topBarCreator:this.createTopBar,thisContext:this,appName:\"Image Viewer - \"+e,pathToApp:\"/Users/\"+NAME+\"/Applications/Image Viewer.app/\"})).setBackgroundColor(\"rgb(200, 200, 200)\"),this.window=o.getWindow(),this.header=o.getHeader(),this.win=o;let a=document.createElement(\"div\");a.classList.add(\"image-view-scroll\"),a.appendChild(i),this.window.appendChild(a),this.scrollContainer=a,this.addListeners()}.bind(this)}.bind(this)}addListeners(){this.window.classList.add(\"unselectable\"),this.window.addEventListener(\"window-resize\",e=>{if(!this.zoomed){let e=this.win.getWidth();e<30*em&&\"100%\"!=this.img.style.maxWidth?this.img.style.maxWidth=\"100%\":e>30*em&&\"90%\"!=this.img.style.maxWidth&&(this.img.style.maxWidth=\"90%\")}});const e=t=>{if(void 0===this.win&&document.removeEventListener(\"keydown\",e),void 0!==this.win&&this.win.focused())if(t.metaKey||t.ctrlKey)\"=\"==t.key||\"+\"==t.key?(t.preventDefault(),this.zoomIn()):\"-\"==t.key&&(t.preventDefault(),this.zoomOut());else if(\"ArrowUp\"==t.key||\"ArrowDown\"==t.key||\"ArrowLeft\"==t.key||\"ArrowRight\"==t.key)switch(t.key){case\"ArrowUp\":this.scrollContainer.scrollTop-=40;break;case\"ArrowDown\":this.scrollContainer.scrollTop+=40;break;case\"ArrowLeft\":this.scrollContainer.scrollLeft-=40;break;case\"ArrowRight\":this.scrollContainer.scrollLeft+=40}};document.addEventListener(\"keydown\",e)}openInStandalone(){this.win=new Window(280,280,\"Image Viewer\",25,25,{x:10,y:5,topBarCreator:this.createTopBar,thisContext:this,pathToApp:\"/Users/\"+NAME+\"/Applications/Image Viewer.app/\"}),this.win.setBackgroundColor(\"rgb(230, 230, 230)\"),this.window=this.win.getWindow(),this.header=this.win.getHeader(),this.window.classList.add(\"unselectable\");let t=document.createElement(\"div\");t.classList.add(\"image-viewer-standalone-container\");let i=document.createElement(\"button\");i.innerText=\"Choose a File\",i.classList.add(\"unselectable\"),i.style.fontSize=\"1em\",i.style.cursor=\"pointer\",i.onclick=(()=>{FileSystemGUI.requestFile(\"Image\").then(t=>{new e(folders[t].name,t),this.win.close()}).catch(e=>{})}),t.appendChild(i),this.fileOpen=i,this.window.appendChild(t)}createTopBar(){if(TopBar.addToTop(\"File\",\"file\"),this.standalone?TopBar.addToMenu(\"Choose Image\",\"file\",()=>{this.fileOpen.click()}):TopBar.addToMenu(\"Choose Image\",\"file\",()=>{new e}),TopBar.addToTop(\"View\",\"view\"),TopBar.addToMenuIf(()=>!this.standalone,\"Zoom In\",\"view\",this.zoomIn.bind(this),{thisContext:this,clickable:!0}),TopBar.addToMenuIf(()=>!this.standalone,\"Zoom Out\",\"view\",this.zoomOut.bind(this),{thisContext:this,clickable:!0}),!this.standalone){let e=TopBar.addToMenu(\"Scroll  ▶\",\"view\",void 0,{clickable:!1});TopBar.addSecondaryListenerForItem({el:e,name:\"scrollSelect\"}),TopBar.addToMenu(\"Up\",\"scrollSelect\",()=>{this.scrollContainer.scrollTop-=60}),TopBar.addToMenu(\"Down\",\"scrollSelect\",()=>{this.scrollContainer.scrollTop+=60}),TopBar.addToMenu(\"Left\",\"scrollSelect\",()=>{this.scrollContainer.scrollLeft-=60}),TopBar.addToMenu(\"Right\",\"scrollSelect\",()=>{this.scrollContainer.scrollLeft+=60})}TopBar.addToMenu(\"Close Window\",\"file\",()=>{this.win.close()}),TopBar.addToTop(\"Help\",\"help\"),TopBar.addToMenu(\"About Image Viewer\",\"help\",()=>{About.newWindow(\"Image Viewer\",\"The official Image Viewer for WebSystem.\",\"1.0\",\"assets/image.png\")})}zoomIn(){this.zoomed=!0,this.img.style.maxWidth=\"100em\",this.img.style.maxHeight=\"100em\",this.img.style.height=(this.img.clientHeight+9*em).toString()+\"px\",this.img.style.objectFit=\"cover\"}zoomOut(){this.zoomed=!0,this.img.style.maxWidth=\"120em\",this.img.style.maxHeight=\"120em\",this.img.style.height=(this.img.clientHeight-9*em).toString()+\"px\",this.img.clientHeight<40&&(this.img.style.height=\"40px\"),this.img.style.objectFit=\"cover\"}}GlobalStyle.newClass(\"image-viewer-standalone-container\",\"height: calc(100% - 1.2em);\",\"display: flex;\",\"justify-content:center;\",\"align-items:center;\"),GlobalStyle.newClass(\"image-view-scroll\",\"display:flex;\",\"justify-content: center;\",\"align-items: center;\",\"overflow: auto;\",\"height: calc(100% - 1.2em);\",\"width: 100%;\"),appImagePaths[\"Image Viewer\"]=\"assets/imageviewer.png\",makeFunctions[\"Image Viewer\"]=(()=>{new e}),openPossibilities.Image=((t,i)=>{new e(t,i)}),document.addEventListener(\"file-system-ready\",()=>{folders[\"/Users/\"+NAME+\"/Applications/Image Viewer.app/\"]||(delete makeFunctions[\"Image Viewer\"],delete appImagePaths[\"Image Viewer\"])},{once:!0})}();"
    }
}