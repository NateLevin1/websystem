

<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      calculator.js - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  
  <link type="text/css" rel="stylesheet" href="styles/collapse.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      WebSystem
    </h3>

    
      <h3>
        Resources
      </h3>
      
        <a href="https://github.com/UltimatePro-Grammer/websystem">repository</a>
      
    

    <h3>Classes</h3><ul><li id="Appstore-nav"><a href="Appstore.html">Appstore</a><ul class='methods'><li data-type="method" id="Appstore-installApp-nav"><a href="Appstore.html#.installApp">installApp</a></li><li data-type="method" id="Appstore-addApplicationToScreen-nav"><a href="Appstore.html#addApplicationToScreen">addApplicationToScreen</a></li></ul></li><li id="Clipboard-nav"><a href="Clipboard.html">Clipboard</a><ul class='methods'><li data-type="method" id="Clipboard-get-nav"><a href="Clipboard.html#.get">get</a></li><li data-type="method" id="Clipboard-set-nav"><a href="Clipboard.html#.set">set</a></li></ul></li><li id="FileSystem-nav"><a href="FileSystem.html">FileSystem</a><ul class='methods'><li data-type="method" id="FileSystem-addFileAtLocation-nav"><a href="FileSystem.html#.addFileAtLocation">addFileAtLocation</a></li><li data-type="method" id="FileSystem-addFolderAtLocation-nav"><a href="FileSystem.html#.addFolderAtLocation">addFolderAtLocation</a></li><li data-type="method" id="FileSystem-requestFileByGUI-nav"><a href="FileSystem.html#.requestFileByGUI">requestFileByGUI</a></li></ul></li><li id="FileViewer-nav"><a href="FileViewer.html">FileViewer</a><ul class='methods'><li data-type="method" id="FileViewer-createFile-nav"><a href="FileViewer.html#createFile">createFile</a></li><li data-type="method" id="FileViewer-createFolder-nav"><a href="FileViewer.html#createFolder">createFolder</a></li><li data-type="method" id="FileViewer-intelligentOpen-nav"><a href="FileViewer.html#intelligentOpen">intelligentOpen</a></li><li data-type="method" id="FileViewer-openFolder-nav"><a href="FileViewer.html#openFolder">openFolder</a></li><li data-type="method" id="FileViewer-openFolderWindow-nav"><a href="FileViewer.html#openFolderWindow">openFolderWindow</a></li><li data-type="method" id="FileViewer-uploadNewFile-nav"><a href="FileViewer.html#uploadNewFile">uploadNewFile</a></li></ul></li><li id="GlobalStyle-nav"><a href="GlobalStyle.html">GlobalStyle</a><ul class='methods'><li data-type="method" id="GlobalStyle-addRaw-nav"><a href="GlobalStyle.html#.addRaw">addRaw</a></li><li data-type="method" id="GlobalStyle-newClass-nav"><a href="GlobalStyle.html#.newClass">newClass</a></li><li data-type="method" id="GlobalStyle-newRulesByIdentifier-nav"><a href="GlobalStyle.html#.newRulesByIdentifier">newRulesByIdentifier</a></li></ul></li><li id="ImageViewer-nav"><a href="ImageViewer.html">ImageViewer</a></li><li id="Window-nav"><a href="Window.html">Window</a><ul class='methods'><li data-type="method" id="Window-clear-nav"><a href="Window.html#clear">clear</a></li><li data-type="method" id="Window-configureElement-nav"><a href="Window.html#configureElement">configureElement</a></li><li data-type="method" id="Window-dispatchFocus-nav"><a href="Window.html#dispatchFocus">dispatchFocus</a></li><li data-type="method" id="Window-focused-nav"><a href="Window.html#focused">focused</a></li><li data-type="method" id="Window-forceClose-nav"><a href="Window.html#forceClose">forceClose</a></li><li data-type="method" id="Window-getHeader-nav"><a href="Window.html#getHeader">getHeader</a></li><li data-type="method" id="Window-getHeaderText-nav"><a href="Window.html#getHeaderText">getHeaderText</a></li><li data-type="method" id="Window-getHeight-nav"><a href="Window.html#getHeight">getHeight</a></li><li data-type="method" id="Window-getHeightInEm-nav"><a href="Window.html#getHeightInEm">getHeightInEm</a></li><li data-type="method" id="Window-getWidth-nav"><a href="Window.html#getWidth">getWidth</a></li><li data-type="method" id="Window-getWidthInEm-nav"><a href="Window.html#getWidthInEm">getWidthInEm</a></li><li data-type="method" id="Window-getWindow-nav"><a href="Window.html#getWindow">getWindow</a></li><li data-type="method" id="Window-getWindowHeight-nav"><a href="Window.html#getWindowHeight">getWindowHeight</a></li><li data-type="method" id="Window-getWindowWidth-nav"><a href="Window.html#getWindowWidth">getWindowWidth</a></li><li data-type="method" id="Window-giveFocus-nav"><a href="Window.html#giveFocus">giveFocus</a></li><li data-type="method" id="Window-makeString-nav"><a href="Window.html#makeString">makeString</a></li><li data-type="method" id="Window-removeFocus-nav"><a href="Window.html#removeFocus">removeFocus</a></li><li data-type="method" id="Window-setBackgroundColor-nav"><a href="Window.html#setBackgroundColor">setBackgroundColor</a></li><li data-type="method" id="Window-setHeaderColor-nav"><a href="Window.html#setHeaderColor">setHeaderColor</a></li><li data-type="method" id="Window-setHeaderTextColor-nav"><a href="Window.html#setHeaderTextColor">setHeaderTextColor</a></li><li data-type="method" id="Window-setMinHeight-nav"><a href="Window.html#setMinHeight">setMinHeight</a></li><li data-type="method" id="Window-setMinWidth-nav"><a href="Window.html#setMinWidth">setMinWidth</a></li><li data-type="method" id="Window-setTitle-nav"><a href="Window.html#setTitle">setTitle</a></li></ul></li></ul><h3 id="global-nav">Global</h3><ul><li><a href="global.html#boot">boot</a></li><li><a href="global.html#clearSelected">clearSelected</a></li><li><a href="global.html#createDesktopFolder">createDesktopFolder</a></li><li><a href="global.html#isHover">isHover</a></li><li><a href="global.html#outerHeight">outerHeight</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        calculator.js
      </h1>
    

    
      

<section>
  <article>
    <pre class="prettyprint source linenums"><code>// CSS Definitions
GlobalStyle.newClass("calc-screen-container", "background-color: #8c8c8c;", "width:100%;", "height: 30%;");
GlobalStyle.newClass("calc-screen", "position: absolute;", "top: 10%;", "width: 99%;", "font-size: 4em;", "text-align: right;");
GlobalStyle.newClass("calc-button", /*"padding-top:5%;", "padding-bottom:5%;",*/ "display: table-cell;", "background-color: rgba(180,180,180,0.3);", "border: 0.2em solid black;", "text-align: center;", "vertical-align: middle;", "transition: background-color 0.03s;", "font-size: 1.3em;");
GlobalStyle.newClass("calc-button:active", "background-color: rgba(255, 255, 255, 0.4);"); // on click
GlobalStyle.newClass("calc-button-container", "display:table;", "width:100%;","height:63%;");
GlobalStyle.newClass("calc-button-row", "display: table-row;", "height:20%;");
GlobalStyle.newClass("calc-modifier", "background-color: rgba(255, 159, 12, 0.8);");
GlobalStyle.newClass("calc-modifier:active", "background-color: rgba(255, 159, 12, 1);");
GlobalStyle.newClass("calc-0", "border-right:none;");
GlobalStyle.newClass("calc-0-2", "border-left:none;", "color: rgba(0,0,0,0);");

class Calculator {
    constructor() {
        this.operation = "";
        this.lastNumber = "";
        this.currentNumber = "";
        this.oldFontSize = "";

        let win = new Window(117, 262, "Calculator", 20,35,20,2.2);
        this.window = win.getWindow();
        this.header = win.getHeader();
        this.win = win;
        this.win.setBackgroundColor("rgb(40,40,40)");

        let screenContainer = document.createElement("div");
        screenContainer.classList.add("calc-screen-container");

        let screen = document.createElement("div"); // display text
        screenContainer.appendChild(screen);
        screen.innerHTML = "0";
        screen.classList.add("calc-screen");
        this.fitText(screen);
        
        this.window.appendChild(screenContainer);

        // The button rows are a bunch of divs using table display
        let buttonContainer = document.createElement("div"); 
        buttonContainer.classList.add("calc-button-container");
        this.window.appendChild(buttonContainer);

        // Rows
        let row1 = document.createElement("div");
        row1.classList.add("calc-button-row");
        buttonContainer.appendChild(row1);

        let row2 = document.createElement("div");
        row2.classList.add("calc-button-row");
        buttonContainer.appendChild(row2);

        let row3 = document.createElement("div");
        row3.classList.add("calc-button-row");
        buttonContainer.appendChild(row3);

        let row4 = document.createElement("div");
        row4.classList.add("calc-button-row");
        buttonContainer.appendChild(row4);

        let row5 = document.createElement("div");
        row5.classList.add("calc-button-row");
        buttonContainer.appendChild(row5);

        


        // Row 1
        let clear = document.createElement("div");
        clear.classList.add("calc-button", "unselectable", "clickable");
        clear.innerHTML = "AC";
        clear.title = "All Clear (or press c)";
        row1.appendChild(clear);

        let negate = document.createElement("div");
        negate.classList.add("calc-button", "unselectable", "clickable");
        negate.innerHTML = "+/-";
        negate.title = "Negate the sign of the current value (or press shift-minus)";
        row1.appendChild(negate);

        let percent = document.createElement("div");
        percent.classList.add("calc-button", "unselectable", "clickable");
        percent.innerHTML = "%";
        percent.title = "Percent (or press %)";
        row1.appendChild(percent);

        let divide = document.createElement("div");
        divide.classList.add("calc-button", "calc-modifier", "unselectable", "clickable");
        divide.innerHTML = "/";
        divide.title = "Divide (or press /)";
        row1.appendChild(divide);


        
        // Row 2
        let seven = document.createElement("div");
        seven.classList.add("calc-button", "unselectable", "clickable");
        seven.innerHTML = "7";
        row2.appendChild(seven);

        let eight = document.createElement("div");
        eight.classList.add("calc-button", "unselectable", "clickable");
        eight.innerHTML = "8";
        row2.appendChild(eight);

        let nine = document.createElement("div");
        nine.classList.add("calc-button", "unselectable", "clickable");
        nine.innerHTML = "9";
        row2.appendChild(nine);

        let multiply = document.createElement("div");
        multiply.classList.add("calc-button", "calc-modifier", "unselectable", "clickable");
        multiply.innerHTML = "x";
        multiply.title = "Multiply (or press x or *)";
        row2.appendChild(multiply);




        // Row 3
        let four = document.createElement("div");
        four.classList.add("calc-button", "unselectable", "clickable");
        four.innerHTML = "4";
        row3.appendChild(four);

        let five = document.createElement("div");
        five.classList.add("calc-button", "unselectable", "clickable");
        five.innerHTML = "5";
        row3.appendChild(five);

        let six = document.createElement("div");
        six.classList.add("calc-button", "unselectable", "clickable");
        six.innerHTML = "6";
        row3.appendChild(six);

        let subtract = document.createElement("div");
        subtract.classList.add("calc-button", "calc-modifier", "unselectable", "clickable");
        subtract.innerHTML = "-";
        subtract.title = "Subtract (or press -)"
        row3.appendChild(subtract);


        // Row 4
        let one = document.createElement("div");
        one.classList.add("calc-button", "unselectable", "clickable");
        one.innerHTML = "1";
        row4.appendChild(one);

        let two = document.createElement("div");
        two.classList.add("calc-button", "unselectable", "clickable");
        two.innerHTML = "2";
        row4.appendChild(two);

        let three = document.createElement("div");
        three.classList.add("calc-button", "unselectable", "clickable");
        three.innerHTML = "3";
        row4.appendChild(three);

        let add = document.createElement("div");
        add.classList.add("calc-button", "calc-modifier", "unselectable", "clickable");
        add.innerHTML = "+";
        add.title = "Add (or press +)"
        row4.appendChild(add);


        // Row 5
        let zero = document.createElement("div");
        zero.classList.add("calc-button", "calc-0", "unselectable", "clickable");
        zero.innerHTML = "0";
        row5.appendChild(zero);
        let zero2 = document.createElement("div");
        zero2.classList.add("calc-button", "calc-0-2", "unselectable", "clickable");
        zero2.innerHTML = "0";
        row5.appendChild(zero2);

        let decimal = document.createElement("div");
        decimal.classList.add("calc-button", "unselectable", "clickable");
        decimal.innerHTML = ".";
        decimal.title = "Add a decimal point (or press .)";
        row5.appendChild(decimal);

        let equals = document.createElement("div");
        equals.classList.add("calc-button", "calc-modifier", "unselectable", "clickable");
        equals.innerHTML = "=";
        equals.title = "Equal (or press enter or =)";
        row5.appendChild(equals);
        
        // button click
        this.window.querySelectorAll(".calc-button").forEach((element)=>{
            element.onclick = ()=>{
                this.pressButton(element.innerHTML);
            }
        });
        this.screen = screen;


        // KEYBOARD SHORTCUTS
        document.addEventListener("keydown", event => {
            if(this.win.focused()) { // only count if focused
                let key = event.key;
                this.pressButton(key);
                if(key == "c"||key == "C") {
                    if((event.ctrlKey||event.metaKey)) { // tried to copy/paste
                        event.preventDefault();
                        navigator.clipboard.writeText(this.currentNumber);
                    } else { // tried to clear
                        this.pressButton("AC");
                    }
                }
                else if(key == "Enter") {
                    this.pressButton("=");
                }
                else if(key == "_") {
                    this.pressButton("+/-");
                }
                else if(key == "*") {
                    this.pressButton("x");
                }
            }
          });
    }
    updateScreen(text="") {
        if(text) {
            this.screen.innerHTML = text;
        } else {
            this.screen.innerHTML = this.currentNumber;
        }
        this.fitText(this.screen);
    }
    pressButton(button) {
        if(button.isNumber()) {
            this.currentNumber += button;
            while(this.currentNumber.startsWith("0") &amp;&amp; this.currentNumber != "0") {
                this.currentNumber = this.currentNumber.substring(1, this.currentNumber.length);
            }
            this.updateScreen();
        } else {
            switch(button) {
                case ".":
                    if(!this.currentNumber.includes(".")) {
                        if(this.currentNumber == "") {
                            this.currentNumber = 0;
                        }
                        this.currentNumber += button;
                    }
                    this.updateScreen();
                    break;
                case "+":
                    this.setOperation("+");
                    break;
                case "-":
                    this.setOperation("-");
                    break;
                case "x":
                    this.setOperation("x");
                    break;
                case "/":
                    this.setOperation("/");
                    break;
                case "=":
                    this.getAnswer();
                    break;
                case "AC":
                    this.operation = "";
                    this.lastNumber = "";
                    this.currentNumber = "";
                    this.updateScreen("0");
                    break;
                case "+/-":
                    this.currentNumber = (parseFloat(this.currentNumber)*-1).toString();
                    this.updateScreen();
                    break;
                case "%":
                    this.currentNumber = (parseFloat(this.currentNumber)/100).toString();
                    this.updateScreen();
                    break;
                default:
                    break;
            }
        }
    }

    getAnswer() {
        if(!this.currentNumber) {
            this.currentNumber = "0";
        }
        let last = parseFloat(this.lastNumber);
        let current = parseFloat(this.currentNumber);
        switch(this.operation) {
            case "+":
                this.currentNumber = last+current;
                break;
            case "-":
                this.currentNumber = last-current;
                break;
            case "x":
                this.currentNumber = last*current;
                break;
            case "/":
                this.currentNumber = last/current;
                break;
            default:
                break;
        }
        this.lastNumber = "";
        this.operation = "";
        this.currentNumber = (this.currentNumber).toString();
        this.updateScreen();
    }

    setOperation(operation) {
        // sets the current number if no previous was clicked
        if(!this.currentNumber) {
            this.currentNumber = this.lastPressed;
        }

        if(this.currentNumber) {
            this.lastPressed = this.currentNumber;
        }
        
        if(this.operation != "") {
            this.getAnswer();
            var old = this.currentNumber;
        }
        
        
        this.operation = operation;
        this.lastNumber = this.currentNumber;
        
        this.currentNumber = "";
        if(old) {
            this.updateScreen(old);
        } else {
            this.updateScreen(this.lastNumber);
        }
        this.resetScreen();
    }

    resetScreen() {
        var oldScreenContent = this.screen.innerHTML;
        this.screen.innerHTML = "";
        setTimeout(()=>{
            this.screen.innerHTML = oldScreenContent;
        }, 100);
    }


    /**
    * Fit text to div (from &lt;a href="https://github.com/ricardobrg/fitText/">fitText&lt;/a>)
    * @param {HTMLElement} outputSelector - Element to select (changed from link above to not be id based)
    */
    fitText(output) {
        // max font size in pixels
        if(!this.oldFontSize) {
            this.oldFontSize = parseFloat(getComputedStyle(output).fontSize);
        }
        output.style.fontSize = this.oldFontSize;
        const maxFontSize = this.oldFontSize;
        // get the DOM output element by its selector
        let outputDiv = output;
        // get element's width
        let width = outputDiv.clientWidth;
        // get content's width
        let contentWidth = outputDiv.scrollWidth;
        // get fontSize
        let fontSize = parseInt(window.getComputedStyle(outputDiv, null).getPropertyValue('font-size'),10);
        // if content's width is bigger then elements width - overflow
        if (contentWidth > width){
            fontSize = Math.ceil(fontSize * width/contentWidth,10);
            fontSize =  fontSize > maxFontSize  ? fontSize = maxFontSize  : fontSize - 1;
            outputDiv.style.fontSize = fontSize+'px';   
        }else{
            // content is smaller then width... let's resize in 1 px until it fits 
            while (contentWidth === width &amp;&amp; fontSize &lt; maxFontSize){
                fontSize = Math.ceil(fontSize) + 1;
                fontSize = fontSize > maxFontSize  ? fontSize = maxFontSize  : fontSize;
                outputDiv.style.fontSize = fontSize+'px';   
                // update widths
                width = outputDiv.clientWidth;
                contentWidth = outputDiv.scrollWidth;
                if (contentWidth > width){
                    outputDiv.style.fontSize = fontSize-1+'px';
                }
            }
        }
    }


}

function makeCalculator() {
    new Calculator;
}

appImagePaths["Calculator"] = "assets/calc.png";
makeFunctions["Calculator"] = ()=>{ makeCalculator(); };</code></pre>
  </article>
</section>

    


  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>
